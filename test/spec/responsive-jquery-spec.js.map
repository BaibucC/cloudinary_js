{
  "version": 3,
  "file": "responsive-jquery-spec.js",
  "sourceRoot": "",
  "sources": [
    "responsive-jquery-spec.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "topPosition = 0\n\ncl =null\ndescribe 'client side responsive', ->\n  if /phantom|HeadlessChrome/i.test(navigator.userAgent)\n    console.warn(\"Skipping responsive tests in PhantomJS or HeadlessChrome\")\n    return\n  defaultConfig = cloud_name: 'sdk-test'\n  describe \"responsive\", ()->\n    fixtureContainer = undefined\n    testDocument = null\n    container = undefined\n    testWindow = null\n    originalTimeout = 0\n    handler = undefined\n    beforeAll (done)->\n      # Open a new window with test HTML. A dynamic title is required in order to open a *new* window each time even if\n      # previous window was not closed.\n      testURL = \"responsive-jquery-test.html\"\n      testURL = \"/base/test/docRoot/#{testURL}\" if typeof __karma__ != \"undefined\"\n      testWindow = window.open( testURL,\"Cloudinary test #{(new Date()).toLocaleString()}\", \"width=500, height=500, top=\" + topPosition, false)\n      topPosition = 500\n      testWindow.addEventListener 'karma-ready', ()=>\n          testDocument = testWindow.document\n          image1 = testDocument.getElementById('image1')\n          expect(image1).toBeDefined()\n          done()\n        , {capture:false, once: true}\n\n    afterAll ()->\n      testWindow.removeEventListener('resize', handler)\n      testWindow.close()\n\n    beforeEach ()->\n      originalTimeout = jasmine.DEFAULT_TIMEOUT_INTERVAL;\n      jasmine.DEFAULT_TIMEOUT_INTERVAL = 10000;\n      cl = $.cloudinary = new (cloudinary.CloudinaryJQuery)(defaultConfig)\n      fixtureContainer = document.createElement('div')\n      fixtureContainer.id=\"fixture\";\n      document.body.appendChild(fixtureContainer)\n\n    afterEach ()->\n      fixtureContainer.remove()\n      jasmine.DEFAULT_TIMEOUT_INTERVAL = originalTimeout\n\n    triggerResize = (window)->\n      evt = window.document.createEvent('UIEvents')\n      evt.initUIEvent 'resize', true, false, window, 0\n      window.dispatchEvent evt\n\n\n    it 'should traverse up the DOM to find a parent that has clientWidth', ->\n      aContainer = undefined\n      divContainer = undefined\n      img = undefined\n      divContainer = $('<div>')\n        .css(width: 101)\n        .appendTo(fixtureContainer)\n      aContainer = $('<a>')\n        .appendTo(divContainer)\n      img = cl.image('sample.jpg',\n          width: 'auto'\n          dpr: 'auto'\n          crop: 'scale'\n          responsive: true\n      )\n      img.appendTo(aContainer)\n      cl.responsive()\n      expect(img.attr('src')).not.toEqual undefined\n\n    it 'should compute breakpoints correctly', ->\n      el = $('<img/>')\n      expect(cl.calc_breakpoint(el, 1)).toEqual 100\n      expect(cl.calc_breakpoint(el, 10)).toEqual 100\n      expect(cl.calc_breakpoint(el, 110)).toEqual 200\n      cl.config().breakpoints = [\n          50\n          150\n      ]\n      expect(cl.calc_breakpoint(el, 1)).toEqual 50\n      expect(cl.calc_breakpoint(el, 100)).toEqual 150\n      expect(cl.calc_breakpoint(el, 180)).toEqual 150\n\n      cl.config().breakpoints = (width) ->\n        width / 2\n\n      expect(cl.calc_breakpoint(el, 100)).toEqual 50\n\n      $(el).data 'breakpoints', '70,140'\n      expect(cl.calc_breakpoint(el, 1)).toEqual 70\n      expect(cl.calc_breakpoint(el, 100)).toEqual 140\n\n    it 'should correctly resize responsive images', (done) ->\n      container = undefined\n      img = undefined\n      dpr = cl.device_pixel_ratio()\n      container = $('<div></div>').css(width: 101).appendTo(fixtureContainer)\n      img = cl.image('sample.jpg',\n        width: 'auto'\n        dpr: 'auto'\n        crop: 'scale'\n        responsive: true)\n      img.appendTo(container)\n      expect(img.attr('src')).toBeFalsy()\n      cl.responsive()\n      expect(img.attr('src')).toEqual window.location.protocol + '//res.cloudinary.com/sdk-test/image/upload/c_scale,dpr_' + dpr + ',w_200/sample.jpg'\n      container.css 'width', 211\n      expect(img.attr('src')).toEqual window.location.protocol + '//res.cloudinary.com/sdk-test/image/upload/c_scale,dpr_' + dpr + ',w_200/sample.jpg'\n      $(window).resize()\n      window.setTimeout (->\n        # wait(200)\n        expect(img.attr('src')).toEqual window.location.protocol + '//res.cloudinary.com/sdk-test/image/upload/c_scale,dpr_' + dpr + ',w_300/sample.jpg'\n        container.css 'width', 101\n        window.setTimeout (->\n          # wait(200)\n          expect(img.attr('src')).toEqual window.location.protocol + '//res.cloudinary.com/sdk-test/image/upload/c_scale,dpr_' + dpr + ',w_300/sample.jpg'\n          done()\n        ), 200\n      ), 200\n\n    it \"should not resize images with fixed width containers\", (done)->\n      image1 = testDocument.getElementById('image1')\n      src = image1.getAttribute('src')\n      expect(src).toBeDefined()\n      currentWidth = src.match(/w_(auto:)?(breakpoints[_\\d]*:)?(\\d+)/)[3]\n      handler = ()->\n        src = image1.getAttribute('src')\n        expect(src).toBeDefined()\n        newWidth = src.match(/w_(\\d+)/)[1]\n        expect(newWidth).toEqual currentWidth\n        done()\n      testWindow.addEventListener 'resize', handler\n      testWindow.resizeBy(200,0)\n\n    describe \"responsive_class\", ->\n      it \"should set the class used for responsive functionality\", ->\n        img = cl.image( \"sample\", responsive: true, responsive_class: \"cl-foobar\")\n        expect(cloudinary.Util.hasClass(img, \"cl-foobar\")).toBeTruthy()\n\n"
  ]
}